<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Tenant</title>
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  </head>
<body class="bg-light">
  <%- include('../partials/navbar') %>

  <div class="container py-5">

    <!-- Back Button -->
    <div class="mb-3">
      <a href="/tenants" class="btn btn-outline-secondary">
        Back
      </a>
    </div>

    <h2 class="mb-4">Edit Tenant</h2>

    <!-- Edit Tenant Form -->
    <form action="/tenants/edit/<%= tenant.tenant_id %>" method="POST" class="card p-4 shadow-sm">

      <!-- First Name -->
      <div class="mb-3">
        <label for="first_name" class="form-label">First Name</label>
        <input 
          type="text" 
          class="form-control" 
          id="first_name" 
          name="first_name" 
          value="<%= tenant.first_name %>" 
          required>
      </div>

      <!-- Last Name -->
      <div class="mb-3">
        <label for="last_name" class="form-label">Last Name</label>
        <input 
          type="text" 
          class="form-control" 
          id="last_name" 
          name="last_name" 
          value="<%= tenant.last_name %>" 
          required>
      </div>

      <!-- Unit Dropdown (Grouped by Building) -->
      <div class="mb-4">
        <label for="unit_id" class="form-label">Unit</label>
        <select class="form-select" id="unit_id" name="unit_id" required>
          <% buildings.forEach(building => { %>
            <optgroup label="<%= building.bldg_name %>">
              <% building.units.forEach(unit => { %>
                <option 
                  value="<%= unit.unit_id %>" 
                  <%= unit.unit_id === tenant.unit_id ? 'selected' : '' %>>
                  Unit <%= unit.unit_no %>
                </option>
              <% }) %>
            </optgroup>
          <% }) %>
        </select>
      </div>

      <!-- Buttons -->
      <div class="d-flex justify-content-between">
        <button type="submit" class="btn btn-primary">Update Tenant</button>
        <a href="/tenants" class="btn btn-secondary">Cancel</a>
      </div>

    </form>
  </div>

  <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>
